# Specification - Marble API Gaussian Splat Generation

## Overview
This track implements the core 3D reconstruction stage of the Genie pipeline: converting 2D images (generated by Nano Banana) into interactive 3D Gaussian Splats using the Marble API. This is an asynchronous, multi-step process involving asset upload, world generation, and operation polling.

## Functional Requirements
- **Media Asset Upload (Direct Client Upload):**
    - The Node.js backend will call `/marble/v1/media-assets:prepare_upload` to get a signed `upload_url`.
    - The React frontend will upload the generated image (base64/blob) directly to the signed URL using a `PUT` request.
- **World Generation:**
    - The system will call `/marble/v1/worlds:generate` referencing the uploaded `media_asset_id`.
    - **Model Selection:** Support toggling between `Marble 0.1-mini` and `Marble 0.1-plus` in the UI.
- **Operation Polling (Frontend Driven):**
    - The React app will poll `/marble/v1/operations/{operation_id}` using a custom hook or interval.
    - Status transitions from `PENDING/RUNNING` to `SUCCEEDED` must be handled.
- **Asset Retrieval & Integration:**
    - Upon operation success, the system will call `/marble/v1/worlds/{world_id}` to retrieve the final asset URLs.
    - The Gaussian Splat URL (SPZ format) will be extracted and passed to the 3D scene renderer.

## Non-Functional Requirements
- **Developer Transparency:** `console.log` all operation IDs, status changes, and raw API responses.
- **UI Feedback:** Show a minimalist "Loading..." screen during the entire multi-step process.
- **Security:** Ensure API keys remain on the backend; only ephemeral signed URLs and operation IDs are exposed to the frontend.

## Acceptance Criteria
- [ ] User can select between "Mini" and "Plus" models on the Review screen.
- [ ] Clicking "ENTER WORLD" triggers the upload -> generate -> poll sequence.
- [ ] Developer console logs each stage of the materialization process.
- [ ] The 3D environment successfully loads and renders the generated Gaussian Splat (SPZ).

## Out of Scope
- Granular progress visualization in the UI (e.g., percentage bars).
- Backend-driven polling or complex error recovery (retry logic).
- Multiple image support (this track focuses on single image-to-3D).
